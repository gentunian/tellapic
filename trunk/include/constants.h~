/*****************************************************************************
 *   Copyright (c) 2010 Sebasti√°n Treu.
 *
 *   This program is free software; you can redistribute it and/or modify
 *   it under the terms of the GNU General Public License as published by
 *   the Free Software Foundation; version 2 of the License.
 *
 *   This program is distributed in the hope that it will be useful,
 *   but WITHOUT ANY WARRANTY; without even the implied warranty of
 *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *   GNU General Public License for more details.
 *
 *****************************************************************************/
#ifndef CONSTANTS_H_
#define CONSTANTS_H_

/* from stream */
#define ENDIAN_INDEX    0
#define CBYTE_INDEX     1
#define SBYTE_INDEX     2
#define HEADER_SIZE     6


/* All data sections has the sender's id as the first byte */
#define DATA_IDFROM_INDEX   0


/* Indexes for PMSG (private message) data section. */
/* Useful for getting data from data section array  */
#define DATA_PMSG_IDFROM_INDEX DATA_IDFROM_INDEX
#define DATA_PMSG_IDTO_INDEX   1
#define DATA_PMSG_TEXT_INDEX   2


/* Indexes for BMSG (broadcast message) data section */
#define DATA_BMSG_IDFROM_INDEX DATA_IDFROM_INDEX
#define DATA_BMSG_TEXT_INDEX   1


/* Indexes for FIG (drawn figure) data section */
#define DATA_FIG_IDFROM_INDEX     DATA_IDFROM_INDEX
#define DATA_FIG_DBYTE_INDEX      1
#define DATA_FIG_COORDX1_INDEX    2
#define DATA_FIG_COORDY1_INDEX    4
#define DATA_FIG_COORDX2_INDEX    6
#define DATA_FIG_COORDY2_INDEX    8
#define DATA_FIG_DNUMBER_INDEX   10
#define DATA_FIG_WIDTH_INDEX     14
#define DATA_FIG_OPACITY_INDEX   18
#define DATA_FIG_COLOR_INDEX     22
#define DATA_FIG_JOINS_INDEX     25
#define DATA_FIG_CAPS_INDEX      26
#define DATA_FIG_MITER_INDEX     27
#define DATA_FIG_DASHPHASE_INDEX 31
#define DATA_FIG_DASHARRAY_INDEX 34
#define DATA_FIG_FONTSTYLE_INDEX 21
#define DATA_FIG_FONTLEN_INDEX   22
#define DATA_FIG_FONTFACE_INDEX  23
#define DATA_FIG_TEXT_INDEX(fontnamelen) \
  DATA_FIG_FONTFACE_INDEX + fontnamelen


/* Indexes for DRW (drawing a figure upon event) data section */
#define DATA_DRW_IDFROM_INDEX     DATA_IDFROM_INDEX
#define DATA_DRW_DBYTE_INDEX      1
#define DATA_DRW_COORDX1_INDEX    2
#define DATA_DRW_COORDY1_INDEX    4
#define DATA_DRW_DNUMBER_INDEX    6
#define DATA_DRW_WIDTH_INDEX     10
#define DATA_DRW_OPACITY_INDEX   14
#define DATA_DRW_COLOR_INDEX     18
#define DATA_DRW_JOINS_INDEX     21
#define DATA_DRW_CAPS_INDEX      22
#define DATA_DRW_MITER_INDEX     23
#define DATA_DRW_DASHPHASE_INDEX 27
#define DATA_DRW_DASHARRAY_INDEX 31


/* Indexes for CLADD (client connected) data section */
#define DATA_CLADD_IDFROM_INDEX  DATA_IDFROM_INDEX
#define DATA_CLADD_NAME_INDEX    1


/* Indexes for CLRM (client disconnected) data section */
#define DATA_CLRM_IDFROM_INDEX   DATA_IDFROM_INDEX


/* Indexes for CLIST (clients list) data section */
#define DATA_CLIST_IDFROM_INDEX  DATA_IDFROM_INDEX


/* Indexes for PWDASK data section */
/* Indexes for PWD data section */
/* Indexes for PWDOK data section */
#define DATA_PWD_IDFROM_INDEX DATA_IDFROM_INDEX
#define DATA_PWD_INDEX        1


/* Indexes for FILEASK, FILE and FILEOK data section*/
#define DATA_FILE_IDFROM_INDEX DATA_IDFROM_INDEX
#define DATA_FILE_INDEX        1


/* from client */
#define CTL_CL_BMSG     0x11
#define CTL_CL_PMSG     0x21
#define CTL_CL_FIG      0x31
#define CTL_CL_DRW      0x41
#define CTL_CL_CLIST    0x51
#define CTL_CL_PWD      0x61
#define CTL_CL_FILEASK  0x71
#define CTL_CL_FILEOK   0x81
#define CTL_FAIL        0x00

/* from server */
#define CTL_SV_CLADD    0x10
#define CTL_SV_CLRM     0x20
#define CTL_SV_CLIST    0x30
#define CTL_SV_PWDASK   0x40
#define CTL_SV_PWDOK    0x50
#define CTL_SV_PWDFAIL  0x60
#define CTL_SV_FILE     0x70


/* Paint properties */
/*
#define LINE_JOIN_MITER   0
#define LINE_JOIN_ROUND   1
#define LINE_JOIN_BEVEL   2
#define END_CAPS_BUTT     0
#define END_CAPS_ROUND    1
#define END_CAPS_SQUARE   2
*/
#define FONT_STYLE_NORMAL 0
#define FONT_STYLE_BOLD   1
#define FONT_STYLE_ITALIC 2
#define FONT_STYLE_BOLD_ITALIC FONT_STYLE_BOLD + FONT_STYLE_ITALIC


/* Tools masks */
#define TOOL_MASK       0xf0
#define TOOL_MARKER     0x10
#define TOOL_PATH       0x20
#define TOOL_ELLIPSE    0x30
#define TOOL_RECT       0x40
#define TOOL_TEXT       0x50
#define TOOL_ERASER     0x60
#define TOOL_PENCIL     0x70
#define TOOL_LINE       0x80


/* Events masks */
#define BUTTON_LEFT     0x1
#define BUTTON_RIGHT    0x2
#define BUTTON_MIDDLE   0x3
#define BUTTON_MASK     0x3
#define EVENT_MASK      0xc
#define EVENT_PRESS     0x4
#define EVENT_DRAG      0x8
#define EVENT_RELEASE   0xc
#define EVENT_NULL      0x0
/* 
 * An event example:
 *                                 tool       event   button
 *                           _______________  ______  ______
 *                          /               \/      \/      \
 *	   	   	    +---+---+---+---+---+---+---+---+
 *	drawing byte   =    | ? | ? | ? | ? | 0 | 1 | 0 | 1 |  Press Event Left Button
 *	   	   	    +---+---+---+---+---+---+---+---+
 *
 *
 *                                 tool       event   button
 *                           _______________  ______  ______
 *                          /               \/      \/      \
 *	   	   	    +---+---+---+---+---+---+---+---+
 *	drawing byte   =    | ? | ? | ? | ? | 1 | 0 | 1 | 1 |  Drag Event Middle Button
 *	   	   	    +---+---+---+---+---+---+---+---+
 *
 *
 *                                 tool       event   button
 *                           _______________  ______  ______
 *                          /               \/      \/      \
 *	   	   	    +---+---+---+---+---+---+---+---+
 *	drawing byte   =    | ? | ? | ? | ? | 1 | 1 | 1 | 0 |  Release Event Right Button
 *	   	   	    +---+---+---+---+---+---+---+---+
 *
 *
*/
#define EVENT_PLEFT     EVENT_PRESS   + BUTTON_LEFT
#define EVENT_PRIGHT    EVENT_PRESS   + BUTTON_RIGHT
#define EVENT_PMIDDLE   EVENT_PRESS   + BUTTON_MIDDLE
#define EVENT_DLEFT     EVENT_DRAG    + BUTTON_LEFT
#define EVENT_DRIGHT    EVENT_DRAG    + BUTTON_RIGHT
#define EVENT_DMIDDLE   EVENT_DRAG    + BUTTON_MIDDLE
#define EVENT_RLEFT     EVENT_RELEASE + BUTTON_LEFT
#define EVENT_RRIGHT    EVENT_RELEASE + BUTTON_RIGHT
#define EVENT_RMIDDLE   EVENT_RELEASE + BUTTON_MIDDLE

/* Example: A byte representing a Marker with a press left event: b = TOOL_MARKER + EVENT_PLEFT; */

#endif
