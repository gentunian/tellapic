from PyQt4 import QtCore, QtGui
from MainWindowUi import Ui_MainWindow
from ToolBoxWidget import *
from ChatWidget import *
import Drawing

class MainWindow(QtGui.QMainWindow, Ui_MainWindow):
    def __init__(self, toolController, parent = None):
        super(MainWindow, self).__init__(parent)
        self.setupUi(self)
        self.setActionGroup()
        self.toolController = toolController

    def setActionGroup(self):
        aGroup = QtGui.QActionGroup(self)
        aGroup.addAction(self.actionSelector)
        aGroup.addAction(self.actionEllipse)
        aGroup.addAction(self.actionRectangle)
        aGroup.addAction(self.actionLine)
        aGroup.addAction(self.actionText)
        aGroup.addAction(self.actionZoom)
        aGroup.addAction(self.actionMarker)
        aGroup.addAction(self.actionPencil)
        aGroup.triggered.connect(self.selectTool_trigger)

    def selectTool_trigger(self, action):
        tool = action.text()

        self.toolController.setTool(tool)
        if (tool == "selector"):
            pass
        elif (tool == "ellipse"):
            pass
        elif (tool == Drawing.DrawingToolRectangle):
            pass
        elif (tool == "line"):
            pass
        elif (tool == "text"):
            pass
        elif (tool == "zoom"):
            pass
        elif (tool == "marker"):
            pass
        elif (tool == "pencil"):
            pass
        
    

if __name__ == "__main__":
    import sys
    app = QtGui.QApplication(sys.argv)
    toolModel = Drawing.ToolModel()
    toolController = Drawing.ToolController(toolModel)
    m = MainWindow(toolController)
    dock = QtGui.QDockWidget("Properties", m)
    box = ToolBoxWidget(toolModel)
    dock.setWidget(box)
    m.addDockWidget(QtCore.Qt.RightDockWidgetArea, dock)
    m.show()
    sys.exit(app.exec_())
